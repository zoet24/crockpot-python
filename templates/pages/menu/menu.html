{% set active_page = 'menu' %}
{% extends "pages/base/base.html" %}

{% block extra_title %} | Menu{% endblock %}

{% block content %}
    <!-- Header -->
    {% with header_text="Menu" %}
        {% include 'components/header.html' %}
    {% endwith %}

    <section class="menu">
        <div class="menu__container">
            <div class="toggle-box toggle-box--no-border">
                <div class="toggle-box__container">
                    <div class="toggle toggle--rounded toggle--border toggle-box__toggle">
                        <input class="toggle__input toggle__input--1" type="radio" name="toggle__MenuShopping" id="toggle__MenuShopping__Menu" checked="checked">
                        <label class="toggle__option toggle__option--1" for="toggle__MenuShopping__Menu">Menu</label>
                        <input class="toggle__input toggle__input--2" type="radio" name="toggle__MenuShopping" id="toggle__MenuShopping__Shopping">
                        <label class="toggle__option toggle__option--2" for="toggle__MenuShopping__Shopping">Shopping List</label>
                        <span class="toggle__slider"></span>
                    </div>
                    <div class="toggle-box__box toggle-box__box--py-0">
                        <div class="toggle-box__box-left">
                            <!-- Show recipes on menu -->
                            {% for menuRec in menuRecs %}
                                <div class="menu__item">
                                    <div class="menu__item-image-wrapper">
                                        <a href="/viewRecipe/{{menuRec[0]}}">
                                            <div class="menu__item-image">
                                                <img src="{{ menuRec[2] }}" alt="">
                                            </div>
                                        </a>
                                    </div>
                                    <div class="menu__item-content-wrapper">
                                        <a href="/viewRecipe/{{menuRec[0]}}" class="menu__item-name-wrapper">
                                            <div class="menu__item-name">
                                                <h2>{{ menuRec[1] }}</h2>
                                            </div>
                                        </a>
                                        <div class="menu__item-icons">
                                            <div class="menu__item-serving">
                                                {% with btn_start=menuRec[3], btn_step="1", btn_min="1", btn_max="20" %}
                                                    {% include 'components/btn-plus-minus.html' %}
                                                {% endwith %}
                                            </div>
                                            <form class="recipe-image__link-wrapper" action="/menu/{{menuRec[0]}}">
                                                <button class="recipe-image__link-submit" type="submit">
                                                    <i class="fas fa-utensils icon"></i>
                                                </button>
                                            </form>
                                            <form class="recipe-image__link-wrapper" action="/fav/{{menuRec[0]}}">
                                                <button class="recipe-image__link-submit" type="submit">
                                                    <i class="fas fa-heart icon"></i>
                                                </button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                        <div class="toggle-box__box-right hide">
                            <div class="accordion">
                                <!-- Accordion item - change id and for -->
                                <div class="accordion__button">
                                  <input type="checkbox" id="accordion__button-1">
                                  <label class="accordion__button-label" for="accordion__button-1">
                                    <span>
                                      <i class="fas fa-drumstick-bite icon icon--no-ml"></i>
                                      Meat
                                    </span>
                                  </label>
                                  <div class="accordion__content">
                                    <ul>
                                        {% for ings in shoppingList %}
                                            {% if ings[1] == "Meat" %}
                                                <li>{{ ings[0] }}{{ ings[2] }}{{ ings[3] }}</li>
                                            {% endif %}
                                        {% endfor %}
                                    </ul>
                                  </div>
                                </div>
                                <!-- Accordion item - change id and for -->
                                <div class="accordion__button">
                                  <input type="checkbox" id="accordion__button-2">
                                  <label class="accordion__button-label" for="accordion__button-2">
                                    <span>
                                      <i class="fas fa-seedling icon icon--no-ml"></i>
                                      Fruit and Veg
                                    </span>
                                  </label>
                                  <div class="accordion__content">
                                    <ul>
                                        {% for ings in shoppingList %}
                                            {% if ings[1] == "Fruit and Veg" %}
                                                <li>{{ ings[0] }}{{ ings[2] }}{{ ings[3] }}</li>
                                            {% endif %}
                                        {% endfor %}
                                    </ul>
                                  </div>
                                </div>
                                <!-- Accordion item - change id and for -->
                                <div class="accordion__button">
                                  <input type="checkbox" id="accordion__button-3">
                                  <label class="accordion__button-label" for="accordion__button-3">
                                    <span>
                                      <i class="fas fa-pepper-hot icon icon--no-ml"></i>
                                      Herbs and Spices
                                    </span>
                                  </label>
                                  <div class="accordion__content">
                                    Lorem ipsum dolor sit amet consectetur, adipisicing elit. Ipsum, reiciendis!
                                  </div>
                                </div>
                                <!-- Accordion item - change id and for -->
                                <div class="accordion__button">
                                  <input type="checkbox" id="accordion__button-4">
                                  <label class="accordion__button-label" for="accordion__button-4">
                                    <span>
                                      <i class="fas fa-cheese icon icon--no-ml"></i>
                                      Dairy
                                    </span>
                                  </label>
                                  <div class="accordion__content">
                                    Lorem ipsum dolor sit amet consectetur, adipisicing elit. Ipsum, reiciendis!
                                  </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Update menu button -->
    <div class="menu__fixed-btns">
        <form method="POST" action="{{ url_for('updateMenu') }}">
            <div class="hide">
                {% for menuRec in menuRecs %}
                    <input type="text" name="id-{{loop.index}}" value="{{ menuRec[0] }}">
                    <input type="number" name="serves-{{loop.index}}" class="menu__item-serving-val">
                {% endfor %}
            </div>
            <div class="btn">
                <input type="submit" value="Update menu">
            </div>
        </form>
        <div class="modal__buttons modal__buttons--clear-menu modal__button--open--clear-menu btn">
            Clear menu
        </div>
    </div>

    <!-- Are you sure you want to clear menu? modal (put identifier on modal, modal__buttons, modal__button--open and modal__button--close )-->
    <div class="modal modal--clear-menu hide">
        <div class="modal__container">
            <div class="modal__content">
                <div class="modal__text">
                    <form class="form form--center" method="POST" action="{{ url_for('clearMenu') }}">
                        <h4>Are you sure you want to clear your menu?</h4>
                        <div class="modal__buttons modal__buttons--clear-menu">
                            <div class="modal__button modal__button--yes btn btn--sm">
                                <input class="" type="submit" value="Yes">
                            </div>
                            <div class="btn btn--sm modal__button modal__button--close modal__button--close--clear-menu">
                                No
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    {% include 'pages/menu/includes/js-updateMenu.html' %}
{% endblock %}