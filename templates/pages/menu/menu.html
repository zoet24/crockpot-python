{% set active_page = 'menu' %}
{% extends "pages/base/base.html" %}

{% block extra_title %} | Menu{% endblock %}

{% block content %}
    <!-- Header -->
    {% with header_text="Menu" %}
        {% include 'components/header.html' %}
    {% endwith %}

    <section class="menu">
        <div class="menu__container">
            <div class="spacer"></div>
            <div class="toggle-box toggle-box--no-border">
                <div class="toggle-box__container">
                    <div class="toggle toggle--rounded toggle--border toggle-box__toggle">
                        <input class="toggle__input toggle__input--1" type="radio" name="toggle__MenuShopping" id="toggle__MenuShopping__Menu" checked="checked">
                        <label class="toggle__option toggle__option--1" for="toggle__MenuShopping__Menu">Menu</label>
                        <input class="toggle__input toggle__input--2" type="radio" name="toggle__MenuShopping" id="toggle__MenuShopping__Shopping">
                        <label class="toggle__option toggle__option--2" for="toggle__MenuShopping__Shopping">Shopping List</label>
                        <span class="toggle__slider"></span>
                    </div>
                    <div class="toggle-box__box">
                        <div class="toggle-box__box-left">
                            <!-- Show recipes on menu -->
                            {% for menuRec in menuRecs %}
                                <div class="menu__item">
                                    <div class="menu__item-image-wrapper">
                                        <a href="/viewRecipe/{{menuRec[0]}}">
                                            <div class="menu__item-image">
                                                <img src="{{ menuRec[2] }}" alt="">
                                            </div>
                                        </a>
                                    </div>
                                    <div class="menu__item-content-wrapper">
                                        <a href="/viewRecipe/{{menuRec[0]}}" class="menu__item-name-wrapper">
                                            <div class="menu__item-name">
                                                <h2>{{ menuRec[1] }}</h2>
                                            </div>
                                        </a>
                                        <div class="menu__item-icons">
                                            <div class="menu__item-serving">
                                                {% with btn_start=menuRec[3], btn_step="1", btn_min="1", btn_max="20" %}
                                                    {% include 'components/btn-plus-minus.html' %}
                                                {% endwith %}
                                            </div>
                                            <form class="recipe-image__link-wrapper" action="/menu/{{menuRec[0]}}">
                                                <button class="recipe-image__link-submit" type="submit">
                                                    <i class="fas fa-utensils icon"></i>
                                                </button>
                                            </form>
                                            <form class="recipe-image__link-wrapper" action="/fav/{{menuRec[0]}}">
                                                <button class="recipe-image__link-submit" type="submit">
                                                    <i class="fas fa-heart icon"></i>
                                                </button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                        <div class="toggle-box__box-right hide">
                            Shopping list
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Update menu button -->
    <form method="POST" action="{{ url_for('updateMenu') }}">
        <div class="hide">
            {% for menuRec in menuRecs %}
                <input type="text" name="id-{{loop.index}}" value="{{ menuRec[0] }}">
                <input type="number" name="serves-{{loop.index}}" class="menu__item-serving-val">
            {% endfor %}
        </div>
        <input class="btn btn--fixed" type="submit" value="Update menu">
    </form>

    {% include 'pages/menu/includes/js-updateMenu.html' %}
{% endblock %}